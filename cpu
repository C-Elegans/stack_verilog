#! /usr/local/bin/vvp
:ivl_version "0.10.0 (devel)" "(s20140801-61-gfe8e7a6-dirty)";
:ivl_delay_selection "TYPICAL";
:vpi_time_precision + 0;
:vpi_module "system";
:vpi_module "vhdl_sys";
:vpi_module "v2005_math";
:vpi_module "va_math";
:vpi_module "v2009";
S_0x7fa7bbe02a30 .scope module, "testbench" "testbench" 2 1;
 .timescale 0 0;
v0x7fa7bbe13a10 .array "Mem", 0 10, 15 0;
v0x7fa7bbe13aa0_0 .net "address", 15 0, v0x7fa7bbe13380_0;  1 drivers
v0x7fa7bbe13b30_0 .var "clk", 0 0;
v0x7fa7bbe13c00_0 .var "data", 15 0;
S_0x7fa7bbe02b90 .scope module, "u0" "cpu" 2 10, 3 1 0, S_0x7fa7bbe02a30;
 .timescale 0 0;
    .port_info 0 /INPUT 1 "clk"
    .port_info 1 /OUTPUT 16 "address"
    .port_info 2 /INPUT 16 "data_in"
    .port_info 3 /OUTPUT 16 "data_out"
    .port_info 4 /OUTPUT 8 "LEDS"
o0x10c951098 .functor BUFZ 8, C4<zzzzzzzz>; HiZ drive
v0x7fa7bbe132c0_0 .net "LEDS", 7 0, o0x10c951098;  0 drivers
v0x7fa7bbe13380_0 .var "address", 15 0;
v0x7fa7bbe13430_0 .net "clk", 0 0, v0x7fa7bbe13b30_0;  1 drivers
v0x7fa7bbe134e0_0 .net "data_in", 15 0, v0x7fa7bbe13c00_0;  1 drivers
o0x10c951158 .functor BUFZ 16, C4<zzzzzzzzzzzzzzzz>; HiZ drive
v0x7fa7bbe13590_0 .net "data_out", 15 0, o0x10c951158;  0 drivers
v0x7fa7bbe13680_0 .var "instruction", 15 0;
v0x7fa7bbe13730_0 .var "sp", 5 0;
v0x7fa7bbe137e0 .array "stack", 0 5, 15 0;
v0x7fa7bbe13880_0 .var "state", 2 0;
E_0x7fa7bbe00690 .event posedge, v0x7fa7bbe13430_0;
S_0x7fa7bbe02cf0 .scope begin, "$unm_blk_7" "$unm_blk_7" 3 28, 3 28 0, S_0x7fa7bbe02b90;
 .timescale 0 0;
v0x7fa7bbe02ea0_0 .var "temp", 15 0;
S_0x7fa7bbe12df0 .scope task, "pop" "pop" 4 13, 4 13 0, S_0x7fa7bbe02b90;
 .timescale 0 0;
v0x7fa7bbe12fb0_0 .var "val", 15 0;
TD_testbench.u0.pop ;
    %load/v 8, v0x7fa7bbe13730_0, 6;
    %subi 8, 1, 6;
    %set/v v0x7fa7bbe13730_0, 8, 6;
    %ix/getv 3, v0x7fa7bbe13730_0;
    %load/av 8, v0x7fa7bbe137e0, 16;
    %set/v v0x7fa7bbe12fb0_0, 8, 16;
    %vpi_call/w 4 21 "$display", "return %d sp: %d", v0x7fa7bbe12fb0_0, v0x7fa7bbe13730_0 {0 0};
    %end;
S_0x7fa7bbe13040 .scope task, "push" "push" 4 4, 4 4 0, S_0x7fa7bbe02b90;
 .timescale 0 0;
v0x7fa7bbe13210_0 .var "val", 15 0;
TD_testbench.u0.push ;
    %vpi_call/w 4 7 "$display", "PUSH, sp: %d", v0x7fa7bbe13730_0 {0 0};
    %load/v 8, v0x7fa7bbe13210_0, 16;
    %ix/getv 3, v0x7fa7bbe13730_0;
    %jmp/1 t_0, 4;
    %ix/load 1, 0, 0; part off
    %ix/load 0, 16, 0; word width
    %assign/av v0x7fa7bbe137e0, 0, 8;
t_0 ;
    %ix/load 0, 1, 0;
    %load/vp0 8, v0x7fa7bbe13730_0, 6;
    %set/v v0x7fa7bbe13730_0, 8, 6;
    %end;
    .scope S_0x7fa7bbe02b90;
T_2 ;
    %set/v v0x7fa7bbe13730_0, 0, 6;
    %end;
    .thread T_2;
    .scope S_0x7fa7bbe02b90;
T_3 ;
    %set/v v0x7fa7bbe13380_0, 0, 16;
    %set/v v0x7fa7bbe13880_0, 0, 3;
    %end;
    .thread T_3;
    .scope S_0x7fa7bbe02b90;
T_4 ;
    %wait E_0x7fa7bbe00690;
    %load/v 8, v0x7fa7bbe13880_0, 3;
    %pad 11, 0, 1;
    %cmpi/u 8, 0, 4;
    %jmp/1 T_4.0, 6;
    %cmpi/u 8, 1, 4;
    %jmp/1 T_4.1, 6;
    %cmpi/u 8, 3, 4;
    %jmp/1 T_4.2, 6;
    %ix/load 0, 3, 0;
    %assign/v0 v0x7fa7bbe13880_0, 0, 0;
    %jmp T_4.4;
T_4.0 ;
    %vpi_call/w 3 17 "$display", "data: %x, address: %x", v0x7fa7bbe134e0_0, v0x7fa7bbe13380_0 {0 0};
    %ix/load 0, 1, 0;
    %load/vp0 8, v0x7fa7bbe13380_0, 16;
    %ix/load 0, 16, 0;
    %assign/v0 v0x7fa7bbe13380_0, 0, 8;
    %load/v 8, v0x7fa7bbe134e0_0, 16;
    %ix/load 0, 16, 0;
    %assign/v0 v0x7fa7bbe13680_0, 0, 8;
    %load/v 8, v0x7fa7bbe134e0_0, 16;
    %cmp/u 8, 2, 16;
    %mov 8, 6, 1;
    %load/v 9, v0x7fa7bbe13380_0, 16;
    %pad 25, 0, 1;
    %cmpi/u 9, 0, 17;
    %inv 4, 1;
    %mov 9, 4, 1;
    %and 8, 9, 1;
    %jmp/0xz  T_4.5, 8;
    %vpi_call/w 3 20 "$finish" {0 0};
T_4.5 ;
    %ix/load 1, 13, 0;
    %mov 4, 0, 1;
    %jmp/1 T_4.7, 4;
    %load/x1p 8, v0x7fa7bbe134e0_0, 3;
    %jmp T_4.8;
T_4.7 ;
    %mov 8, 2, 3;
T_4.8 ;
; Save base=8 wid=3 in lookaside.
    %cmpi/u 8, 0, 3;
    %inv 4, 1;
    %jmp/0xz  T_4.9, 4;
    %movi 8, 1, 3;
    %ix/load 0, 3, 0;
    %assign/v0 v0x7fa7bbe13880_0, 0, 8;
    %jmp T_4.10;
T_4.9 ;
    %movi 8, 3, 3;
    %ix/load 0, 3, 0;
    %assign/v0 v0x7fa7bbe13880_0, 0, 8;
T_4.10 ;
    %jmp T_4.4;
T_4.1 ;
    %load/v 8, v0x7fa7bbe13680_0, 15; Select 15 out of 16 bits
    %pad 23, 0, 1;
    %set/v v0x7fa7bbe13210_0, 8, 16;
    %fork TD_testbench.u0.push, S_0x7fa7bbe13040;
    %join;
    %ix/load 0, 3, 0;
    %assign/v0 v0x7fa7bbe13880_0, 0, 0;
    %jmp T_4.4;
T_4.2 ;
    %fork t_2, S_0x7fa7bbe02cf0;
    %jmp t_1;
    .scope S_0x7fa7bbe02cf0;
t_2 ;
    %fork TD_testbench.u0.pop, S_0x7fa7bbe12df0;
    %join;
    %load/v 8, v0x7fa7bbe12fb0_0, 16;
    %set/v v0x7fa7bbe02ea0_0, 8, 16;
    %ix/load 0, 3, 0;
    %assign/v0 v0x7fa7bbe13880_0, 0, 0;
    %end;
    .scope S_0x7fa7bbe02b90;
t_1 %join;
    %jmp T_4.4;
T_4.4 ;
    %jmp T_4;
    .thread T_4;
    .scope S_0x7fa7bbe02a30;
T_5 ;
    %vpi_call/w 2 6 "$readmemh", "mem.hex", v0x7fa7bbe13a10 {0 0};
    %end;
    .thread T_5;
    .scope S_0x7fa7bbe02a30;
T_6 ;
    %set/v v0x7fa7bbe13b30_0, 0, 1;
    %end;
    .thread T_6;
    .scope S_0x7fa7bbe02a30;
T_7 ;
    %delay 1, 0;
    %load/v 8, v0x7fa7bbe13b30_0, 1;
    %inv 8, 1;
    %set/v v0x7fa7bbe13b30_0, 8, 1;
    %ix/getv 3, v0x7fa7bbe13aa0_0;
    %load/av 8, v0x7fa7bbe13a10, 16;
    %ix/load 0, 16, 0;
    %assign/v0 v0x7fa7bbe13c00_0, 0, 8;
    %jmp T_7;
    .thread T_7;
    .scope S_0x7fa7bbe02a30;
T_8 ;
    %delay 100, 0;
    %vpi_call/w 2 18 "$finish" {0 0};
    %end;
    .thread T_8;
# The file index is used to find the file name in the following table.
:file_names 5;
    "N/A";
    "<interactive>";
    "testbench.v";
    "cpu.v";
    "./tasks.v";
